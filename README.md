# HRCG teardown for Apple ][

This project contains my SourceGen disassembly of RBOOT, RLOAD and HRCG from the DOS Toolkit.

[Go to documentation](https://ursetto.github.io/a2-hrcg-teardown).


## Building HRCG

Only the HRCG code itself is disassembled. Relocatable modules contain both a 2-byte header (code length) and a footer (relocation table) generated by EDASM. I've stripped these off into `HRCG.header` and `HRCG.footer`, and placed the main code in `HRCG.code`. 

If assembled without header or footer, it should work to BLOAD the file at $8E00, as long as you protect HIMEM. The file does need a standard 4-byte DOS header of address and length.

Assuming no code changes, you should be able to create a relocatable module by concatenating `HRCG.header`, a reassembled `HRCG.code`, and `HRCG.footer` into `HRCG`, and upload it as a binary file with a header address of $8E00. The file type should not matter to RLOAD. 

Note that normal disk tools are not likely to support relocatable modules, so you may get unexpected results when transferring files. For example, `applecommander` normally removes the file address and length when getting a raw binary file, but leaves it there for `HRCG`. So, the resulting file contains 6 header bytes before the code.
